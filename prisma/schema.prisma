datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// Enums
enum UserRole {
  USER
  SUPERADMIN
  MINISTRY
}

enum SubscriptionType {
  FREE
  PAID
}

enum LanguageLevel {
  NATIVE
  FLUENT
  BEGINNER
}

// TODO: Fill in InterestsEnum values from interests_model.py
enum InterestsEnum {
  // Example values, replace with actual ones from Python
  SCIENCE
  ART
  SPORTS
}

// Models

model User {
  id                BigInt                @id @default(autoincrement())
  firstName         String
  lastName          String
  role              UserRole              @default(USER)
  email             String                @unique
  username          String                @unique
  password          String
  dateOfBirth       DateTime?             
  subscription      SubscriptionType      @default(FREE)
  verified          Boolean               @default(false)
  organizationName  String?
  cityId            BigInt?
  bioAbout          String?
  bannerId          BigInt?
  avatarId          BigInt?
  onboarded         Boolean               @default(false)
  interests         InterestsEnum[]       
  sessions          UserSession[]         
  academicInfo      UserAcademic?         
  languageProficiencies UserLanguageProficiency[]
  // posts, comments, likes, universityAnalyses relations omitted for brevity

  @@map("users")
}

model UserSession {
  id         BigInt   @id @default(autoincrement())
  userId     BigInt
  token      String   @unique
  expiresAt  DateTime
  user       User     @relation(fields: [userId], references: [id])

  @@map("user_sessions")
}

model UserAcademic {
  id      BigInt   @id @default(autoincrement())
  userId  BigInt   @unique
  gpa     Float?
  sat     Int?
  ielts   Float?
  toefl   Int?
  user    User     @relation(fields: [userId], references: [id])

  @@map("users_academic")
}

model UserLanguageProficiency {
  id      BigInt        @id @default(autoincrement())
  userId  BigInt
  language String
  level   LanguageLevel
  user    User          @relation(fields: [userId], references: [id])

  @@map("users_language_proficiency")
}
